{"version":3,"sources":["app.js"],"names":["paso","paso_Inicial","paso_Final","cita","nombre","fecha","hora","servicios","appInit","tabs","mostrarSeccion","btnPaginador","btnAnterior","btnSiguiente","consultAPI","nombreCliente","selectFecha","selectHora","document","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","seccionAnterior","querySelector","classList","remove","add","pagAnterior","pagSiguiente","pagOculta","showResumen","async","url","location","origin","result","fetch","mostrarServicios","json","error","console","log","servicio","id","precio","p_Servicio","createElement","textContent","p_Precio","div_Servicio","idServicio","onclick","selectServicio","appendChild","some","agregado","filter","push","value","dia","Date","getUTCDay","includes","showAlerta","msg","type","type2","day","split","hour","obj","alertaPrevia","length","i","elmt","alerta","style","marginTop","showAlerta2","fill","resumen","Object","values","children","innerHTML","slice","format_date","toLocaleDateString","timeZone","weekday","year","month","h2Servicios","arrServicios","textServicio","precioServicio","item","btnReservar","reservarCita","datos","FormData","idServicios","map","append","response","method","body","Swal","fire","icon","title","text"],"mappings":"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","file":"bundle.js","sourcesContent":["let paso = 1;\r\nconst paso_Inicial = 1;\r\nconst paso_Final = 3;\r\n\r\nconst cita = {\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded',function () {\r\n    appInit();\r\n});\r\n\r\nfunction appInit() {\r\n    tabs();\r\n    mostrarSeccion();\r\n    btnPaginador();\r\n    btnAnterior();\r\n    btnSiguiente();\r\n    consultAPI();\r\n    nombreCliente();\r\n    selectFecha();\r\n    selectHora();\r\n    // showResumen();\r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.tabs button');\r\n    // console.log(botones)\r\n\r\n    botones.forEach(boton => {\r\n        boton.addEventListener('click',function (e) {\r\n            \r\n            paso = parseInt(e.target.dataset.paso);\r\n            // console.log(paso)\r\n            mostrarSeccion();\r\n            btnPaginador();\r\n        })\r\n    })\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n    \r\n    const seccionAnterior = document.querySelector('.mostrar');\r\n\r\n    if (seccionAnterior) {\r\n        // console.log(\"remove .mostrar\")\r\n        seccionAnterior.classList.remove('mostrar');\r\n    }\r\n\r\n    const seccion = document.querySelector('#paso-'+paso);\r\n    seccion.classList.add('mostrar');\r\n\r\n    const btn_anterior = document.querySelector('.actual');\r\n    btn_anterior.classList.remove('actual');\r\n\r\n    const btn_actual = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n    btn_actual.classList.add('actual');\r\n}\r\n\r\nfunction btnPaginador() {\r\n    const pagAnterior = document.querySelector('#anterior');\r\n    const pagSiguiente = document.querySelector('#siguiente');\r\n\r\n    const pagOculta = document.querySelector('.paginacion .ocultar');\r\n\r\n    if (pagOculta) {\r\n        // console.log(\"remove .ocultar\")\r\n        pagOculta.classList.remove('ocultar');\r\n    }\r\n\r\n    if (paso === 1) {\r\n        pagAnterior.classList.add('ocultar');\r\n    }else if (paso === 3) {\r\n        pagSiguiente.classList.add('ocultar');\r\n        showResumen();\r\n    }\r\n}\r\n\r\nfunction btnAnterior() {\r\n    const btnAnterior = document.querySelector('#anterior');\r\n\r\n    btnAnterior.addEventListener('click',function () {\r\n\r\n        if (paso <= paso_Inicial) return;\r\n\r\n        paso--;\r\n        btnPaginador();\r\n        mostrarSeccion();\r\n    })\r\n\r\n}\r\n\r\nfunction btnSiguiente() {\r\n    const btnSiguiente = document.querySelector('#siguiente');\r\n\r\n    btnSiguiente.addEventListener('click',function () {\r\n\r\n        if (paso >= paso_Final) return;\r\n\r\n        paso++;\r\n        btnPaginador();\r\n        mostrarSeccion();\r\n    })\r\n}\r\n\r\nasync function consultAPI() {\r\n    \r\n    try {\r\n        const url = `${location.origin}/api/servicios`;\r\n\r\n        const result =await fetch(url);\r\n\r\n        const servicios =await result.json();\r\n\r\n        mostrarServicios(servicios);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n\r\n    servicios.forEach(servicio =>{\r\n        const { id,nombre,precio } = servicio;\r\n\r\n        const p_Servicio = document.createElement('p');\r\n        p_Servicio.classList.add('nombre-servicio');\r\n        p_Servicio.textContent = nombre;\r\n\r\n        const p_Precio = document.createElement('p');\r\n        p_Precio.classList.add('precio-servicio');\r\n        p_Precio.textContent = `$${precio}`;\r\n        \r\n        const div_Servicio = document.createElement('div');\r\n        div_Servicio.classList.add('servicio');\r\n        div_Servicio.dataset.idServicio= id;\r\n\r\n        div_Servicio.onclick = function () {\r\n            selectServicio(servicio);\r\n        };\r\n\r\n        div_Servicio.appendChild(p_Servicio);\r\n        div_Servicio.appendChild(p_Precio);\r\n\r\n        document.querySelector('#servicios').appendChild(div_Servicio);\r\n    });\r\n}\r\n\r\nfunction selectServicio(servicio) {\r\n\r\n\r\n    const div_Servicio = document.querySelector(`[data-id-servicio=\"${servicio.id}\"]`);\r\n\r\n    // Codigo creado por mi\r\n    // if (div_Servicio.classList.contains('seleccionado')) {\r\n\r\n    //     cita.servicios.forEach( select_serv => {\r\n\r\n    //         if (select_serv.id === servicio.id) {\r\n    //             cita.servicios.splice(cita.servicios.indexOf(servicio),1)\r\n    //         }\r\n\r\n    //     });\r\n\r\n    //     div_Servicio.classList.remove('seleccionado');\r\n    // }else{\r\n    //     cita.servicios.push(servicio);\r\n    //     div_Servicio.classList.add('seleccionado');\r\n    // }\r\n\r\n    // Codigo del curso\r\n\r\n    if (cita.servicios.some( agregado => agregado.id === servicio.id)) {\r\n        \r\n        cita.servicios = cita.servicios.filter( agregado => agregado.id !== servicio.id)\r\n\r\n        div_Servicio.classList.remove('seleccionado');\r\n    } else {\r\n        cita.servicios.push(servicio);\r\n        div_Servicio.classList.add('seleccionado');\r\n    }\r\n\r\n}\r\n\r\nfunction nombreCliente() {\r\n    const nombre = document.querySelector('#nombre').value;\r\n\r\n    cita.nombre = nombre;\r\n}\r\n\r\nfunction selectFecha() {\r\n    const inputFecha = document.querySelector('#fecha');\r\n\r\n    inputFecha.addEventListener('input',function (e) {\r\n        \r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if ([6,0].includes(dia)) {\r\n            cita.fecha = e.target.value = '';\r\n\r\n            showAlerta({msg:'Fines de semana no permitidos',type:'error',type2:1});\r\n        } else {\r\n            showAlerta({day : dia})\r\n\r\n            cita.fecha = e.target.value;\r\n        }\r\n        // console.log(dia)\r\n    });\r\n}\r\n\r\nfunction selectHora() {\r\n    const inputHora = document.querySelector('#hora');\r\n\r\n    inputHora.addEventListener('input',function (e){\r\n        \r\n        const hora = e.target.value.split(':')[0];\r\n\r\n        if (hora < 10 || hora > 18) {\r\n            \r\n            cita.hora = e.target.value = '';\r\n\r\n            showAlerta({msg:'Hora no vÃ¡lida',type:'error',type2:2});\r\n\r\n        }else {\r\n            showAlerta({hour:hora});\r\n\r\n            cita.hora = e.target.value; \r\n        }\r\n\r\n    })\r\n}\r\n\r\nfunction showAlerta(obj) {\r\n\r\n    const alertaPrevia = document.querySelectorAll('#paso-2 p .alerta');\r\n\r\n    if (alertaPrevia.length === 1) {\r\n\r\n        if ((alertaPrevia[0].textContent.includes('Fines') && obj.day) || (alertaPrevia[0].textContent.includes('Hora') && obj.hour)) {\r\n            alertaPrevia[0].remove();\r\n            return;\r\n        }else if (obj.day || obj.hour) {\r\n            return;\r\n        }else if (obj.msg) {\r\n            \r\n            if (alertaPrevia[0].textContent.includes('Fines') && obj.type2 === 1) {\r\n                return;\r\n            }else if (alertaPrevia[0].textContent.includes('Hora') && obj.type2 === 2) {\r\n                return;\r\n            }\r\n        }\r\n\r\n    }else if (alertaPrevia.length > 1) {\r\n\r\n        for (let i = 0; i < alertaPrevia.length; i++) {\r\n            const elmt = alertaPrevia[i];\r\n\r\n            if ((elmt.textContent.includes('Fines') && obj.day) || (elmt.textContent.includes('Hora') && obj.hour)) {\r\n                elmt.remove();\r\n                return;\r\n            }\r\n            \r\n        }\r\n\r\n        if (obj.msg) {\r\n            return;\r\n        }\r\n\r\n    }\r\n    else if (obj.day || obj.hour) {\r\n        return;\r\n    }\r\n    \r\n    const alerta = document.createElement('div');\r\n    alerta.textContent = obj.msg;\r\n    alerta.classList.add('alerta');\r\n    alerta.classList.add(obj.type);\r\n    alerta.style.marginTop = '2rem';\r\n\r\n    // console.log(alerta)\r\n\r\n    const formulario = document.querySelector('#paso-2 p')\r\n    formulario.appendChild(alerta);\r\n\r\n    // setTimeout(() => {\r\n    //     alerta.remove();\r\n    // }, 5000);\r\n}\r\n\r\nfunction showAlerta2(obj) {\r\n\r\n    const alertaPrevia = document.querySelector('.contenido-resumen p .alerta');\r\n\r\n    if (alertaPrevia) {\r\n\r\n        if (obj.msg) {\r\n            return;\r\n        }else if (obj.fill) {\r\n            alertaPrevia.remove();\r\n            return;\r\n        }\r\n    }else if (obj.fill) {\r\n        return;\r\n    }\r\n\r\n    const alerta = document.createElement('div');\r\n    alerta.textContent = obj.msg;\r\n    alerta.classList.add('alerta');\r\n    alerta.classList.add(obj.type);\r\n    alerta.style.marginTop = '2rem';\r\n\r\n    // console.log(alerta)\r\n\r\n    const formulario = document.querySelector('.contenido-resumen p')\r\n    formulario.appendChild(alerta);\r\n}\r\n\r\nfunction showResumen() {\r\n\r\n    const resumen = document.querySelector('.resumen-datos');\r\n\r\n    if (Object.values(cita).includes('') || cita.servicios.length === 0) {\r\n        \r\n        showAlerta2({msg:'Faltan datos de Servicios, Fecha u Hora',type:'error'});\r\n        resumen.classList.add('display-none');\r\n        return;\r\n    }\r\n\r\n    showAlerta2({fill:true});\r\n    \r\n    resumen.classList.remove('display-none');\r\n\r\n    resumen.children[0].innerHTML = resumen.children[0].innerHTML.slice(0,21)+cita.nombre;\r\n\r\n    const UTC_date = new Date(cita.fecha);\r\n\r\n    const opciones = {timeZone:'UTC',weekday:'long',year:'numeric',month:'long',day:'numeric'};\r\n\r\n    const format_date = UTC_date.toLocaleDateString('es-MX',opciones);\r\n\r\n    console.log(format_date)\r\n\r\n    resumen.children[1].innerHTML = resumen.children[1].innerHTML.slice(0,20)+format_date;\r\n    resumen.children[2].innerHTML = resumen.children[2].innerHTML.slice(0,19)+cita.hora+' Horas';\r\n\r\n    if (!document.querySelector('.resumen-datos h2')) {\r\n        const h2Servicios = document.createElement('h2');\r\n        h2Servicios.textContent = 'Resumen de Servicios';\r\n        resumen.appendChild(h2Servicios);\r\n    }\r\n\r\n    let arrServicios = [];\r\n\r\n    cita.servicios.forEach( (servicio,i) => {\r\n\r\n        arrServicios[i] = document.createElement('div');\r\n        arrServicios[i].classList.add('contenedor-servicio');\r\n\r\n        const textServicio = document.createElement('p');\r\n        textServicio.textContent = servicio.nombre;\r\n\r\n        const precioServicio = document.createElement('p');\r\n        precioServicio.innerHTML = `<span>Precio: </span>$${servicio.precio}`;\r\n\r\n        arrServicios[i].appendChild(textServicio);\r\n        arrServicios[i].appendChild(precioServicio);\r\n\r\n    });\r\n\r\n    if (resumen.children.length === 4) {\r\n\r\n        \r\n        arrServicios.forEach( servicio => {\r\n\r\n            resumen.appendChild(servicio);\r\n\r\n        });\r\n    }else if (resumen.children.length > 4) {\r\n\r\n        let i = 0;\r\n\r\n        while (i !== 4) {\r\n            i = resumen.children.length-1;\r\n            resumen.children.item(i).remove();\r\n        }\r\n\r\n\r\n        arrServicios.forEach( servicio => {\r\n\r\n            resumen.appendChild(servicio);\r\n\r\n        });\r\n    }\r\n\r\n    const btnReservar = document.createElement('button');\r\n    btnReservar.classList.add('boton');\r\n    btnReservar.textContent = 'Reservar Cita';\r\n    btnReservar.onclick = reservarCita;\r\n\r\n    resumen.appendChild(btnReservar);\r\n}\r\n\r\nasync function reservarCita() {\r\n    const datos = new FormData();\r\n\r\n    const idServicios = cita.servicios.map(servicio => servicio.id)\r\n\r\n    datos.append('fecha',cita.fecha);\r\n    datos.append('hora',cita.hora);\r\n    // datos.append('nombre',cita.nombre);\r\n    datos.append('servicios',idServicios);\r\n\r\n    // console.log(idServicios)\r\n\r\n    const url = `${location.origin}/api/citas`;\r\n\r\n    try {\r\n\r\n        const response = await fetch(url,{\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n    \r\n        console.log(response)\r\n    \r\n        const result = await response.json();\r\n    \r\n        if (result) {\r\n            Swal.fire({\r\n                icon: 'success',\r\n                title: 'Cita Creada',\r\n                text: 'Tu cita fue creada correctamente'\r\n            })\r\n\r\n            // setTimeout(() => {\r\n            //     window.location.reload();\r\n            // }, 2000);\r\n\r\n        }\r\n\r\n    } catch (error) {\r\n\r\n        console.log(error)\r\n\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Hubo un error al guardar la cita'\r\n        })\r\n\r\n    }\r\n}\r\n"]}